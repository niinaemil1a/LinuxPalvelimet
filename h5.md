# Tehtävät 5


  
### Tein harjoitukset 21.9.24  
Koneena oli HP laptop R5  
- Windows 11 Home käyttökärjestelmä
- AMD Radeon näytönohjain
- AMD Ryzen 5 7520U prosessori, 4 ydintä
- 8GB DDR5 RAM 
- 512GB SSD josta vapaana 377GB  
  
## a) Kotisivu
    
21.9.24 16.30 

Tässä osiossa oli tarkoitus tehdä kolmen erillisen weppisivun kotisivu ja saada se näkymään omalla palvelimella name based virtual hosting tekniikkaa käyttäen.

Aloitin ottamalla ssh yhteyden virtaalikoneelleni:  

![ssh](https://github.com/user-attachments/assets/06391407-299a-4405-ad3d-76b31f9da789)  
  
Olin tehnyt jo aiemmin käyttäjälle ´niina´ ´index.html´ tiedoston ´public.html´ kansioon. Seuraavaksi loin uuden "Name Based Virtual Hostin" tekemällä `(etc/apache2/sites-available/niinamatela.me.conf´ tiedoston, jonka avulla ohjaan serveriltä pyynnöt oikeaan hakemistoon:  
  
![conf2](https://github.com/user-attachments/assets/d088f384-6dbb-4e56-83f4-ac476bf3151a)  

Otin käyttöön muutokset ja käynnistin palvelimen uudestaan `sudo a2ensite niinamatela.me` ja `sudo systemctl restart apache2` (Lähde: https://terokarvinen.com/2018/name-based-virtual-hosts-on-apache-multiple-websites-to-single-ip-address/).
  
Kokeilin toimintaa selaimessa, mutta sivu ei näkynyt:  
  
![forb](https://github.com/user-attachments/assets/689dfe47-9c31-498a-a10d-58073dc882f2)  

Koska ongelma oli 403 - access denied, päätin katsoa apachen error logista lisätietoja:  

![search](https://github.com/user-attachments/assets/08f4fc58-81f9-4f6e-98e0-5d8ee2a6a672)  

Tästä selvisi, että ongelma oli "because search permissions are missing on a component of the path", eli ongelma oli hakemiston käyttöoikeuksissa. Goolasin ohjeita ja selvisi, että oikeudet tuli tarkistaa (https://cwiki.apache.org/confluence/display/httpd/13PermissionDenied). Listasin ensin komennolla `ls -la` kaikki hakemistot (myös salatut) ja niiden oikeudet.

![image](https://github.com/user-attachments/assets/5092f63c-d3b2-42af-9e63-722cb321b078)  

Tästä voimme päätellä, että käyttäjän ´niina´ oikeuksissa oli muokattavaa. ´drwx------´ tarkoitti, että vain käyttäjällä oli oikeus lukea, kirjoittaa ja suorittaa ja muilla ei oikeuksia ollut. DrWx on lyhenne Directory Read Write eXecute. Oikeudet muutettiin komennolla ´chmod +x niina/´, jolloin kansion oikeudet muuttuivat muotoon ´drwx--x--x´ joka tarkoittaa, että kaikilla on oikeus lukea hakemisto, mutta sen sisältöä voi muokata vain käyttäjä itse. (Lähde: https://www2.math.uconn.edu/~vince/MathDoc/GSGuide/s1-navigating-chmodnum.html)   
  
![image](https://github.com/user-attachments/assets/2f1f6cf8-b615-44e4-8feb-391dfd425db4)  

Lopuksi käynnistin palvelimen uudestaan, ja testasin selaimella:  

![test1](https://github.com/user-attachments/assets/ef1d9db1-0607-46df-a991-79a28a767dbf)  

Seuraavaksi halusin tehdä kolme erillistä weppisivua, joita voi muokata ilman sudo-oikeuksia. Aloitin kirjautumalla ulos palvelimelta komennolla ´exit´. Omalla debianin virtuaalikoneella loin kansion /home/niinam/Documents/Kotisivut´ ja sinne kolme html tiedostoa komennoilla ´nano sivuXX.html´  

![nano](https://github.com/user-attachments/assets/89bfb6bd-327b-44d1-9c84-52c3c0b6c3f3)  
  
![sivu3](https://github.com/user-attachments/assets/0474bafe-8a17-4f92-ae88-3f140e8f9f4a)  

Seuraavaksi sivustot piti kopioida palvelimelle. Teron ohjeiden mukaisesti käytin apuna ssh:n scp toimintoa (https://wiki.debian.org/SSH#scp). Tiedosto lähetettiin palvelimelle komennolla `scp $source_file $remote_user@$remote_host:$destination_file`. Teron esimerkissä lisättiin scp:n jälkeen -r, joka mahdollistaa kok











  
Lähteet: 

  

## b) Alidomain  

Tässä olisiossa oli tehtiin kaksi alidomainia, jotka osoittavat omaan koneeseeni.

20.9 klo 10:33  




Lähteet:  

  
  
## c) Pubkey

20.9 klo 11:29  

Tässä tehtävässä Automatisoitiin kirjautuminen julkisella SSH-avaimella  

Lähteet:  

## d) Nimien DNS tiedot ´host´ ja ´dig´
 

   
### Lähteet: 
Karvinen, Tero 2006. Raportin kirjoittaminen. https://terokarvinen.com/2006/raportin-kirjoittaminen-4/  
Karvinen, Tero 2024. Linuxin palvelimet kurssi. https://terokarvinen.com/linux-palvelimet/  

# Niina Matela  
  
